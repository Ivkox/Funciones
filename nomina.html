<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Nómina</title>

    <!-- Este código es para que salga más bonito NO TOCAR
        Pone un color de fondo en todo lo que esté en body
        y para los encabezados deja espacio a la izquierda para que salgan 
        tabulados.
     -->
    <style>
        body {
            background-color: lightblue;
        }

        h1 {
            color: navy;
            text-align: center;
        }

        p {
            margin-left: 20px;
        }

        h2 {
            margin-left: 20px;
        }

        h3 {
            margin-left: 40px;
        }

        h4 {
            margin-left: 70px;
        }

        h5 {
            margin-left: 100px;
        }
    </style>
</head>

<body>

    <h1>Calculadora de Nómina</h1>

    <p>Por favor introduzca los siguientes datos y pulse calcular</p>


    <!--
        Fíjate que el nombre es un texto (type=text) y los datos numéricos son de tipo "number"
    -->
    <p><strong>Nombre:</strong> <input type="text" id="nombre" size="20"> </p>

    <p><strong>Salario Base:</strong> <input type="number" id="salario_base" size="4"> </p>
    <p><strong>Plus Convenio:</strong> <input type="number" id="plus_convenio" size="4"> </p>
    <p><strong>Antigüedad:</strong> <input type="number" id="antiguedad" size="4"> </p>
    <p><strong>Plus Vestuario:</strong> <input type="number" id="vestuario" size="4"> </p>
    <p><strong>Horas Extra Normales:</strong>
        Horas:<input type="number" id="horas_extra_num" size="4">
        Precio:<input type="number" id="horas_extra_precio" size="4">
    </p>

    <!-- TODO: Falta el resto de campos-->

    <p><button onclick="calcular()">Calcular</button></p>
    <hr>

    <h2>I. DEVENGOS <input type="number" id="total_devengos" size="4"></h2>
    <h3>1. PERCEPCIONES SALARIALES</h3>
    <h4>SALARIO BASE <input type="number" id="dev_salario_base" size="4"></h4>

    <h4>COMPLEM. SALARIALES</h4>
    <h5>Plus convenio<input type="number" id="dev_plus_convenio" size="4"></h4>
        <h5>Antigüedad<input type="number" id="dev_antiguedad" size="4"></h4>
            <h4>HORAS EXTRAORDINARIAS<input type="number" id="dev_horas_extra" size="4"></h4>
            <h3>2. PERCEPCIONES NO SALARIALES</h3>
            <!-- TODO: Falta el resto de campos-->

            <h2>II. DEDUCCIONES <input type="number" id="total_deducciones" size="4"></h2>
            <h3>1. APORTACIONES DEL TRABAJADOR A LA SEGURIDAD SOCIAL</h3>
            <!-- TODO: Falta el resto de campos-->
            <h3>2. IRPF</h3>
            <!-- TODO: Falta el resto de campos-->

            <h2 id="resultado"></h2>

            <script>

                //Función que se llama desde el la página html.
                function calcular() {

                    //Se llama a las funciones que hacen cada cosa (se resuelve poco a poco y siguiendo un orden)

                    calcularDevengos()
                    calcularTotalDevengos()


                    calcularDeducciones()
                    calcularTotalDeducciones()

                    //TODO agrega la llamada a las funciones que necesites
                    mostrarResultado()

                }

                function calcularDevengos() {
                    calcularPercepcionesSalariales()

                }

                function calcularPercepcionesSalariales() {

                    //Datos del formulario
                    let salario = document.getElementById("salario_base")
                    let plus = document.getElementById("plus_convenio")
                    let antiguedad = document.getElementById("antiguedad")

                    //Variables de destino
                    let devSalario = document.getElementById("dev_salario_base")
                    let devPlus = document.getElementById("dev_plus_convenio")
                    let devAntiguedad = document.getElementById("dev_antiguedad")


                    //TODO faltan cosas por hacer

                    //Se asigna el salario introducido por el usuario, al devengo salario base.
                    devSalario.value = salario.value
                    devPlus.value = plus.value
                    devAntiguedad.value = antiguedad.value

                }

                function calcularTotalDevengos() {
                    let devSalario = document.getElementById("dev_salario_base")
                    let devPlus = document.getElementById("dev_plus_convenio")
                    let devAntiguedad = document.getElementById("dev_antiguedad")

                    //Total
                    let total = document.getElementById("total_devengos")


                    //Hay que pasar los valores a numéricos para que haga la suma, si no lo va a concatenar. Por ello usamos, parseInt().
                    total.value = parseInt(devSalario.value) + parseInt(devPlus.value) + parseInt(devAntiguedad.value)

                    //TODO Faltan elementos por sumar

                }

                function calcularDeducciones() {
                    //TODO implementar
                }

                function calcularTotalDeducciones() {

                    let deducciones = document.getElementById("total_deducciones")

                    deducciones.value = 0
                }

                function mostrarResultado() {

                    const MSG = "<strong>LÍQUIDO A PERCIBIR (importe neto):  </strong>"

                    let nombre = document.getElementById("nombre")
                    let devengos = document.getElementById("total_devengos")
                    let deducciones = document.getElementById("total_deducciones")

                    let resultado = document.getElementById("resultado")

                    let total = parseInt(devengos.value) - parseInt(deducciones.value)

                    resultado.innerHTML = MSG + total + " <h1>Invítate a algo " + nombre.value + "</h1>"

                }

                //TODO implementa todas las funciones que necesites.

            </script>

</body>

</html>